<!DOCTYPE html>
<html>
<head>
    <title>Travel Album</title>
    <style>
        body {
            font-family: 'Times New Roman', serif;
            margin: 0;
            padding: 0;
        }
        h1 {
            color: blue; /* 设置标题颜色为蓝色 */
        }
        h2 {
            color: blue; /* 设置标题颜色为蓝色 */
        }
        .sidebar {
            width: 200px;
            height: 100vh;
            background-color: #f1f1f1;
            position: fixed;
            padding: 20px;
            box-sizing: border-box;
            color: blue; /* 设置标题颜色为蓝色 */
        }

        .sidebar h2 {
            margin-top: 0;
            color: blue; /* 设置标题颜色为蓝色 */
        }

        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }

        .sidebar li {
            margin-bottom: 10px;
            cursor: pointer;
            color: blue; /* 设置标题颜色为蓝色 */
        }

        .content {
            margin-left: 220px;
            padding: 20px;
        }

        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .gallery img {
            width: 300px;
            height: 200px;
            object-fit: cover;
            margin: 10px;
            border: 1px solid #ddd;
            padding: 5px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }

        .slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .slideshow img {
            max-width: 80%;
            max-height: 80%;
        }

        .thumbnail-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .thumbnail-container img {
            width: 100px;
            height: 75px;
            object-fit: cover;
            margin: 5px;
            border: 1px solid #ddd;
            padding: 2px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }
    </style>
    <!-- 引入 heic2any 库 -->
    <script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.3/bundled/heic2any.js"></script>
</head>
<body>
    <div class="sidebar">
        <h2>Travel</h2>
        <ul>
            <li><a href="http://leeergou996.github.io/homepage/" target="_blank" style="color: blue; text-decoration: none;">My Homepage</a></li> <!-- 新增主页链接 -->
            <li><a href="https://leeergou996.github.io/homepage/travel1.html" target="_blank" style="color: blue; text-decoration: none;">My Travel <Map></Map></a></li> <!-- 新增主页链接 -->

            <li id="homeLink">Overview</li>
            <li id="japanTravelLink">Japan Travel</li>
            <li id="hongKongTravelLink">Hong Kong Travel</li> <!-- 新增香港旅行链接 -->
            <li id="hungaryTravelLink">Hungary Travel</li> <!-- 新增匈牙利旅行链接 -->
            <li id="austriaTravelLink">Austria Travel</li> <!-- 新增奥地利旅行链接 -->
            <li id="germanTravelLink">Germany Travel</li> <!-- 新增德国旅行链接 -->
            <li id="pragueTravelLink">Czech Travel</li> <!-- 新增布拉格旅行链接 -->
            <li id="romaTravelLink">Italy Travel</li> <!-- 新增罗马旅行链接 -->
            <li id="strasbourgTravelLink">France Travel</li> <!-- 新增斯特拉斯堡、科尔马旅行链接 -->
        </ul>
    </div>

    <div class="content">
        <div class="gallery" id="galleryContainer">
            <!-- Travel photos will be displayed here -->
        </div>
        <div id="travelThoughts" style="display: block;">
            <h2>Japan 2024.4.28-2024.5.7</h2>
            It was my first abroad travel and also my first travel to Japan. 
            I have been to Tokyo, Kyoto, Uji, Osaka, and Kamakura (Fujisawa) within one week. 
            I met my alumnus, my professor, and my fellow countryman in Tokyo. 
            The travel was smooth and wonderful. I bought many souvenirs and many anime goods. 
            I went to many landmarks (famous in the real world and anime). I shall keep the memory in my mind for a long time. 
            I am positively looking forward to my second travel to Japan. 
            
            <p>I include the plan, schedule, and cost in this <a href="https://github.com/LeeErGou996/leeergou.github.io/raw/main/travel/japan_travel/japan_travel.pdf" target="_blank">file</a> (Chinese)</p>
            
			<h2>Germany 2024.9.26-2025.8.22</h2>
  				<p>Currently, I am studying in Munich, Germany. Although the studies are not easy, I explore the city and the country during my free time.</p>
				<p>Munich is a big city, and the weather is often cloudy. When it is sunny, my mood feels better.</p>
            <h2>China 2025.8.26-2025.9.23</h2>
                <p>I'm returning home for a break. On my way back, I stopped by Wien and Budapest.</p>
            <h2>Czech 2025.11.115-2025.11.16</h2>
                <p>Travel to Prague, Czech Republic.</p>
                <!-- Photos will be added here -->
            <h2>Italy & Vatican City 2025.12.6-2025.12.8</h2>
                <p>Travel to Rome and Vatican City.</p>
                <!-- Photos will be added here -->
            <h2>France 2025.12.24-2025.12.25</h2>
                <p>Travel to Strasbourg and Colmar, France for seichi junrei.</p>
                <!-- Photos will be added here -->
        </div>

        <div class="slideshow">
            <img src="" alt="Slideshow Image">
        </div>

        <div class="thumbnail-container">
            <!-- Thumbnails will be added here -->
        </div>
    </div>

    <script>
        const galleryContainer = document.getElementById('galleryContainer');
        const travelThoughts = document.getElementById('travelThoughts');
        const slideshow = document.querySelector('.slideshow');
        const slideshowImage = slideshow.querySelector('img');
        const thumbnailContainer = document.querySelector('.thumbnail-container');
        const japanTravelLink = document.getElementById('japanTravelLink');
        const homeLink = document.getElementById('homeLink');
        const hongKongTravelLink = document.getElementById('hongKongTravelLink');
        const hungaryTravelLink = document.getElementById('hungaryTravelLink');
        const austriaTravelLink = document.getElementById('austriaTravelLink');
        const germanTravelLink = document.getElementById('germanTravelLink');
        const pragueTravelLink = document.getElementById('pragueTravelLink');
        const romaTravelLink = document.getElementById('romaTravelLink');
        const strasbourgTravelLink = document.getElementById('strasbourgTravelLink');

        // 将图片 URL 转换为 blob 对象
        function urlToBlob(url) {
            return fetch(url, { mode: 'cors' })
                .then(response => response.blob())
                .catch(error => console.error(error));
        }

        // 解码 HEIC 图像
        function decodeHEICImage(imageBlob, callback) {
            const heic2any = new HeicConvert({
                to: 'image/jpeg',
                quality: 1
            });
            heic2any.convert(imageBlob)
                .then(result => callback(result))
                .catch(error => console.error(error));
        }

        // 将 blob 对象转换为 img 支持的格式
        function blobToImageUrl(blob) {
            return URL.createObjectURL(blob);
        }

        // 通用函数：递归加载文件夹中的所有图片
        function loadTravelPhotos(folderPath, photoLabel) {
            galleryContainer.innerHTML = '';
            thumbnailContainer.innerHTML = '';
            travelThoughts.style.display = 'none';

            // 显示加载提示
            galleryContainer.innerHTML = '<p>Loading photos...</p>';

            // 递归获取所有图片文件
            function getAllImages(path, allImages = []) {
                return fetch(`https://api.github.com/repos/LeeErGou996/leeergou.github.io/contents/travel/${path}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Failed to load: ${path}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        const promises = [];
                        
                        data.forEach(item => {
                            if (item.type === 'file' && /\.(jpg|jpeg|png|gif|webp|heic)$/i.test(item.name)) {
                                allImages.push(item);
                            } else if (item.type === 'dir') {
                                // 递归处理子文件夹
                                promises.push(getAllImages(`${path}/${item.name}`, allImages));
                            }
                        });
                        
                        return Promise.all(promises).then(() => allImages);
                    });
            }

            getAllImages(folderPath)
                .then(allImages => {
                    if (allImages.length === 0) {
                        galleryContainer.innerHTML = '<p>No photos found in this folder.</p>';
                        return;
                    }

                    galleryContainer.innerHTML = '';

                    allImages.forEach((file, index) => {
                        const img = document.createElement('img');
                        img.src = file.download_url;
                        img.alt = `${photoLabel} Photo ${index + 1}`;
                        galleryContainer.appendChild(img);

                        img.addEventListener('click', () => {
                            slideshow.style.display = 'flex';
                            slideshowImage.src = file.download_url;
                        });

                        const thumbnail = document.createElement('img');
                        thumbnail.src = file.download_url;
                        thumbnail.alt = `Thumbnail ${index + 1}`;
                        thumbnail.addEventListener('click', () => {
                            slideshow.style.display = 'flex';
                            slideshowImage.src = file.download_url;
                        });
                        thumbnailContainer.appendChild(thumbnail);
                    });
                })
                .catch(error => {
                    console.error(`Error loading ${photoLabel} photos:`, error);
                    galleryContainer.innerHTML = `<p>Error loading ${photoLabel} photos. Please try again later.</p>`;
                });
        }

        // 显示 Hong Kong Travel 照片
        function showHongKongTravelPhotos() {
            loadTravelPhotos('hongkong_travel', 'Hong Kong Travel');
        }

        // 显示 Japan Travel 照片
        function showJapanTravelPhotos() {
            loadTravelPhotos('japan_travel', 'Japan Travel');
        }

        // 显示 Hungary Travel 照片
        function showHungaryTravelPhotos() {
            loadTravelPhotos('hungary_travel', 'Hungary Travel');
        }

        // 显示 Austria Travel 照片
        function showAustriaTravelPhotos() {
            loadTravelPhotos('austria_travel', 'Austria Travel');
        }

        // 显示 German Travel 照片
        function showGermanTravelPhotos() {
            loadTravelPhotos('germany_travel', 'Germany Travel');
        }

        // 显示 Prague Travel 照片
        function showPragueTravelPhotos() {
            loadTravelPhotos('czech_travel', 'Czech Travel');
        }

        // 显示 Roma Travel 照片
        function showRomaTravelPhotos() {
            loadTravelPhotos('italy_travel', 'Italy Travel');
        }

        // 显示 Strasbourg, Colmar Travel 照片
        function showStrasbourgTravelPhotos() {
            loadTravelPhotos('france_travel', 'France Travel');
        }

        // 显示 travel 感悟
        function showTravelThoughts() {
            galleryContainer.innerHTML = '';
            thumbnailContainer.innerHTML = '';
            travelThoughts.style.display = 'block';
        }

        hongKongTravelLink.addEventListener('click', showHongKongTravelPhotos);
        japanTravelLink.addEventListener('click', showJapanTravelPhotos);
        hungaryTravelLink.addEventListener('click', showHungaryTravelPhotos); // 添加匈牙利事件监听器
        austriaTravelLink.addEventListener('click', showAustriaTravelPhotos); // 添加奥地利事件监听器
        germanTravelLink.addEventListener('click', showGermanTravelPhotos); // 添加事件监听器
        pragueTravelLink.addEventListener('click', showPragueTravelPhotos); // 添加布拉格事件监听器
        romaTravelLink.addEventListener('click', showRomaTravelPhotos); // 添加罗马事件监听器
        strasbourgTravelLink.addEventListener('click', showStrasbourgTravelPhotos); // 添加斯特拉斯堡事件监听器
        homeLink.addEventListener('click', showTravelThoughts);
        slideshow.addEventListener('click', () => {
            slideshow.style.display = 'none';
        });

        // 初始显示 travel 感悟
        showTravelThoughts();
    </script>
</body>
</html>